<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="content-type" content="text/html;charset=utf-8">
    <title>泵站信息</title>
    <link rel="stylesheet" href="../static/jquery-ui/css/jquery-ui.min.css">
    <link rel="stylesheet" href="../static/bootstrap/3.3.0/css/bootstrap.min.css" >
	<link rel="stylesheet" href="../static/bootstrap-select/css/bootstrap-select.min.css" >
	<link rel="stylesheet" href="../static/fancytree/skin-lion/ui.fancytree.min.css">   
	<link rel="stylesheet" href="../static/bootstrap-notify/animate.css">   	
	<link rel="stylesheet" href="../static/datatables/media/css/dataTables.bootstrap.css">
	<script type="text/javascript" src="../static/jquery/jquery-1.11.3.min.js"></script>
	<script type="text/javascript" src="../static/jquery-ui/js/jquery-ui.min.js"></script>
	<script type="text/javascript" src="../static/bootstrap/3.3.0/js/bootstrap.min.js"></script>	
	<script type="text/javascript" src="../static/bootstrap-select/js/bootstrap-select.min.js"></script>	
	<script type="text/javascript" src="../static/fancytree/jquery.fancytree-all.min.js"></script>
	<script type="text/javascript" src="../static/bootstrap-notify/bootstrap-notify.min.js"></script>
	<script type="text/javascript" src="../static/datatables/media/js/jquery.dataTables.js"></script>
	<script type="text/javascript" src="../static/datatables/media/js/dataTables.bootstrap.js"></script>
	<script type="text/javascript" src="../static/js/hzcommon.js"></script>
	<script type="text/javascript">
		//详情页跳转
		function goDetail(id){
			 //hzcommon.setKey("hzinfoskipparam", id);
			 window.location.href="../pumpStation/stationEdit"; 
		}
		
		function unitView(id){
			
			window.location.href="../pumpStation/unitView"; 
		}
		
		function equipmentView(id){
			window.location.href="../pumpStation/equipmentView"; 
		}
		
		function pipeView(id){
			window.location.href="../pumpStation/pipeView"; 
		}
	
		function dataGridbtnEdit(id){
			//hzcommon.setKey("hzinfoskipparam", id);
			window.location.href="../pumpStation/stationEdit"; 
		}
		function dataGridbtnDel(id){
			/* var ret = confirm("确定要删除账号‘" + id +"’吗?");
			if (ret == true){
				$.ajax({
		         	   url:"../sys/user/deleteUser.do",
		         	   dataType:"json",
		         	   type:"POST",
		         	   data:{"account":id},
			           success:function(data){
			        	   if (data == "1")
			        	       hzcommon.showMsg('success',"账号'" + id + "'删除成功");
			        	   else if (data == "-1")
			        		   hzcommon.showMsg('warning',"账号'" + id + "'不存在");
			        	   else if (data == "-2")
			        		   hzcommon.showMsg('success',"账号'" + id + "'被多系统使用，只清除所有权限");
			        	   else
			        		   hzcommon.showMsg('danger',"账号'" + id + "'删除失败");
			        	   var table = $('#usertable').DataTable();
			        	   table.ajax.reload();
			           }
		            });
			} */
		}
		function loadUserTable(){
			$('#usertable').DataTable( {
				"ajax": {
					    "url": "../pumpStation/getStation.do",
					    "type":"POST",
					    "dataSrc": "rows"
				    },
				"oLanguage": {
	                	"sProcessing":   "处理中...",
	                	"sLoadingRecords": "载入中...",
				    	"sLengthMenu": "每页显示 _MENU_ 条记录",
				    	"sZeroRecords": "抱歉， 没有找到",
				    	"sInfo": "从 _START_ 到 _END_ /共 _TOTAL_ 条数据",
				    	"sInfoEmpty": "没有数据",
				    	"sInfoFiltered": "(从 _MAX_ 条数据中检索)",
				    	"oPaginate": {
				    	"sFirst": "首页",
				    	"sEmptyTable":     "表中数据为空",
				    	"sPrevious": "前一页",
				    	"sNext": "后一页",
				    	"sLast": "尾页"
				    	},
				    	"sSearch": "查找",
				    	"sZeroRecords": "没有检索到数据"
			    	},
				columns: [
				          { title:"泵站编码" , data : 'code'},
				          { title:"泵站名称" , data : 'name'},
				          { title:"装机容量" , data: 'installedPower' },
				          { title:"装机台数" , data: 'totalUnit' },
				          { title:'设计提水量' , data: 'designedDelivery'},
				          { title:'实际提水量' , data: 'realDelivery'},
				          { title:'总扬程' , data: 'totalHead'},
				          { title:'净扬程' , data: 'netHead'},
				          { title:'<div style="width:260px">子项信息卡片</div>'}
					],
				"columnDefs" : [
				    {
				    	// 定义操作列
						"targets" : 2,//操作按钮目标列
						'orderable' : true,
						"data" : null,
						"render" : function(data, type,row) {
							return data.toFixed(2);
						}
				    },
				    {
				    	// 定义操作列
						"targets" : 2,//操作按钮目标列
						'orderable' : true,
						"data" : null,
						"render" : function(data, type,row) {
							return data.toFixed(2);
						}
				    },
				    {
				    	// 定义操作列
						"targets" : 4,//操作按钮目标列
						'orderable' : true,
						"data" : null,
						"render" : function(data, type,row) {
							return data.toFixed(2);
						}
				    },
				    {
				    	// 定义操作列
						"targets" : 5,//操作按钮目标列
						'orderable' : true,
						"data" : null,
						"render" : function(data, type,row) {
							return data.toFixed(2);
						}
				    },
				    {
				    	// 定义操作列
						"targets" : 6,//操作按钮目标列
						'orderable' : true,
						"data" : null,
						"render" : function(data, type,row) {
							return data.toFixed(2);
						}
				    },
				    {
				    	// 定义操作列
						"targets" : 7,//操作按钮目标列
						'orderable' : true,
						"data" : null,
						"render" : function(data, type,row) {
							return data.toFixed(2);
						}
				    },
				    {
				    	// 定义操作列
						"targets" : 8,//操作按钮目标列
						'orderable' :false,
						'width' : '265px',
						"data" : null,
						"render" : function(data, type,row) {
							var id = '"' + row.id + '"';
							var html = "<div><input type='button' class='btn btn-primary' onclick='unitView("+ id + ")' style='margin:0px;height:25px;line-height:5px;' value='机组信息'/>&nbsp;"
							html += "<input type='button' class='btn btn-primary' onclick='equipmentView("+ id + ")' style='margin:0px;height:25px;line-height:5px;' value='机电设备'/>"
							html += "<input type='button' class='btn btn-primary' onclick='pipeView("+ id + ")' style='margin:0px;margin-left:5px;height:25px;line-height:5px;' value='管线管道'/>"
							html += "</div>";
							return html;
						}
				    }]
			} );
		}
		
		$(function(){
			$("#btnAdd").click(function(event){
				//hzcommon.setKey("hzinfoskipparam", "");
				window.location.href="../pumpStation/stationEdit";
	    	});
			loadUserTable();
		});
	</script>
    
</head>
<body style="padding-left: 23px;padding-right:23px">
   <center>
    <form id="form1">
   <div style="width:90% ;text-align: left;">
        <h3>
            <font face="微软雅黑" id="pageTitle">泵站信息</font>
        </h3><br/>
        <div >
        	<table id="usertable" class="table table-bordered table-striped table-hover" width="100%">

			</table>        	       		
		</div>
    </div>
    </form>
    </center>
</body>
</html>
